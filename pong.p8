pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
function playerbounds(p)
	if(p.y > 127-ph) p.y = 127-ph
	if(p.y < 0) p.y = 0
end

function collide(a, b)

	local x1, x2 = a.x, a.x+pw
	local y1, y2 = a.y, a.y+ph
	
	local bx1, bx2 = b.x, b.x+bd
	local by1, by2 = b.y, b.y+bd
	
	if(
	(bx1 > x1 and bx1 < x2
	and by1 > y1 and by1 < y2)
	or
	(bx2 > x1 and bx2 < x2 
	and by2 > y1 and by2 < y2)
	) then
		return true
	else return false	end

end

function drawscore(p, x)

	numtable = {
	[0] = 10,
	[1] = 1,
	[2] = 2,
	[3] = 3,
	[4] = 4,
	[5] = 5,
	[6] = 6,
	[7] = 7,
	[8] = 8,
	[9] = 9,
	 }

	score = tostr(p.sc)

	for n=1,#score do
		c=sub(score, n, n)

		spr(numtable[tonum(c)], 
					x-(#score*4)+(n*8), 0)
	end

end

function _init()
pw=4		-- paddle width
ph=16	-- paddle height
bd=2		-- ball diameter

-- spawning coords for ball
bspw={x=63, y=20}

p1={x=0, y=0, sc=0}
p2={x=123, y=0, sc=0}

b={
	x=bspw.x,
	y=bspw.y, 
	_v={x=1, y=1}
}
end

function _update()
	-- player 1 movement
	if(btn(⬆️, 0)) then
		p1.y -= 2
	elseif(btn(⬇️, 0)) then
		p1.y += 2
	end
	
	-- player 2 movement
	if(btn(⬆️, 1)) then
	p2.y -= 2
	elseif(btn(⬇️, 1)) then
	p2.y += 2
	end

	-- player bounds
	playerbounds(p1)
	playerbounds(p2)

	-- ball boundaries
	if(b.x > 128-bd or b.x < 0) b._v.x *= -1
	if(b.y > 128-bd or b.y < 0) b._v.y *= -1

	-- ball movement
	b.x += b._v.x * 2
	b.y += b._v.y * 1
	
	-- ball collision detection
	if(collide(p1, b) or
	collide(p2, b)) then
		b._v.x *= -1	
	end
	

end

function _draw()
	cls()

		-- score
	-- player 1
	drawscore(p1, 48)
	drawscore(p2, 80)

	-- player 1
	rectfill(p1.x, p1.y, 
										p1.x+pw, p1.y+ph)
	-- player 2
	rectfill(p2.x, p2.y,
										p2.x+pw, p2.y+ph)					
	-- ball
	rectfill(b.x, b.y,
										b.x+bd, b.y+bd)
	

end
__gfx__
00000000000070000077770000777700070000700777777000777770077777700077770000777700007777000000000000000000000000000000000000000000
00000000007770000700007007000070070000700700000007000000000000700700007007000070070007700000000000000000000000000000000000000000
00700700000070000000007000000070070000700777770007777700000077000077770007000070070070700000000000000000000000000000000000000000
00077000000070000000007000000070070000700000007007000070000700000700007007000070070070700000000000000000000000000000000000000000
00077000000070000000007000000070070000700000007007000070000700000700007007000070070700700000000000000000000000000000000000000000
00700700000070000077770000077700007777700000007007000070000700000700007000777770070700700000000000000000000000000000000000000000
00000000000070000700000007000070000000700700007007000070000700000700007000000070077000700000000000000000000000000000000000000000
00000000007777700777777000777700000000700077770000777700000700000077770000777700007777000000000000000000000000000000000000000000
__sfx__
00010000000301c6432c61035600326002b60523600196000e600006003a6003b6003c6003d6003d6003d6003d6003d6003d6003d6003c6003b6003a600396003760034600316002b60000000000000000000000
000200003560030650036102d6701a650196501665007650026500c6601f6501e6501c6501b650196501965018640176501665015650146401364012640106301263011630116200f6200f6100e6100d6100c650
011000000005000000000000000000000000000005000000000000000000000000000305000000000500000000000000000000000000000000000000000000000500000000110000000007000000001300000000
0104000018b501bb501db501fb5018b501bb501db501fb5018b501bb501db501fb5018b501bb501db501fb5018b501bb501db501fb5018b501bb501db501fb5018b501bb501db501fb5018b501bb501db501fb50
001000002b55229510275522b51024552275102b55224510275522b51024552275102b55224512275522b51024552275102b55224510275522b51024552275102b55224512275522b51024552275102955224510
001000000005000000000000000000000000000005000000000000000000000000500305000000000500000000000000000000000000000000000000000000000502000000110300000007020000001303000000
011000000000018b0018b550000018b000000000000000000000000000000000000000000000000000000000000000000018b55000000000000000000000000000000000000000000000000000000013b5500000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
011000100c043188160c8201881018940188100c8201881000000188200c0431881018940188100c8201881000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
01 09020644
02 09050644

